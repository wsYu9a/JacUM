<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.shiro.mapper.UserMapper">

    <select id="getByUserName" resultType="com.example.shiro.pojo.User">
        select * from shiro.users where username =#{name}
    </select>
    <select id="getUserRole" resultType="java.lang.String">
        select role from role where rid = (select rid from role_user where uid = #{id})
    </select>
    <select id="getRolePerms" resultType="java.lang.String">
        SELECT DISTINCT p.permission
        FROM users u
                 JOIN role_user ru ON u.id = ru.uid
                 JOIN role_perm rp ON ru.rid = rp.rid
                 JOIN perm p ON rp.pid = p.pid
        WHERE u.id = #{id};
    </select>

</mapper>

